openapi: 3.0.0

info:
  title: KU SEEK
  description: CRUD operations for KU SEEK
  version: 2.0.0

servers:
  - url: /api/v1

paths:
  /csrf-token:
    get:
      tags:
        - Authentication
      summary: Get a csrf-token for form validation
      operationId: controllers.auth_controller.get_csrf_token
      responses:
        200:
          description: Return a csrf-token for validation
          content:
            application/json:
              schema:
                type: object
                properties:
                  csrf_token:
                    type: string

  /refresh:
    get:
      tags:
        - Authentication
      summary: Get a new access token from a refesh token
      operationId: controllers.auth_controller.get_new_access_token
      parameters:
        - in: cookie
          name: refresh_token
          schema:
            type: string
          required: true
      responses:
        200:
          description: Return a new access token
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
        400:
          description: Invalid refresh token provided in header

  /auth/logout:
    post:
      summary: Logout a user from the system
      operationId: controllers.auth_controller.logout
      responses:
        200:
          description: Logout successfull
        401:
          description: User not authenticated

  /auth/credentials:
    post:
      tags:
          - Authentication
      summary: Login a user using credentials and return user credentials.
      operationId: controllers.auth_controller.handle_credential_login
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: The user's email
                password:
                  type: string
                  description: The user's password
      responses: 
        200:
          description: return client_id and access/refresh tokens
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserCredentials'
        400:
          description: Invalid authorization code

  /auth/oauth:
    post:
      tags:
        - Authentication
      summary: Login or Register a user and return user credentials.
      operationId: controllers.auth_controller.handle_authentication
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                code:
                  type: string
                  description: The grant code from the oauth2 flow
      responses:
        200:
          description: return client_id and access/refresh tokens
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/UserCredentials"
        400:
          description: Invalid authorization code

  /companies:
    get:
      tags:
        - Company
      summary: Get all companies in the database.
      operationId: controllers.controller.get_all_companies

      responses:
        200:
          description: A list of companies
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AllCompanyOutput'
  /admin/users:
    get:
      tags:
        - Admin
      summary: Get all user creation requests
      description: Retrieve all user creation requests that are not denied, including user and profile data.
      operationId: controllers.controller.get_all_user_request
      responses:
        200:
          description: A list of user requests with profile data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRequest'

        401:
          description: User not authenticated
        403:
          description: User does not have admin authorization
         
  /company:
    get:
      tags:
        - Company
      summary: Get the authenticated user's company profile
      description: Retrieve the company profile associated with the authenticated user (from the access token).
      operationId: controllers.controller.get_company
      responses:
        200:
          description: Company profile for the authenticated user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllCompanyOutput'
        401:
          description: User not authenticated
        404:
          description: Company not found

  /admin/jobs:
    get:
      tags:
        - Admin
      summary: Get all job post creation requests
      description: Retrieve all job post creation requests that are not denied, including job details.
      operationId: controllers.controller.get_all_job_request
      responses:
        200:
          description: A list of job requests with job data
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JobRequestWithJob'
        401:
          description: User not authenticated
        403:
          description: User does not have admin authorization
    
    post:
      tags:
        - Admin
      summary: Update job post verification statuses
      description: Update the status of one or more job post creation requests. Can approve, deny, or delete job posts.
      operationId: controllers.controller.update_job_status
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/JobStatusUpdate'
      responses:
        200:
          description: Job statuses updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminUpdateResponse'
        400:
          description: Could not update job IDs
        401:
          description: User not authenticated
        403:
          description: User does not have admin authorization

  /jobs:
    get:
      tags:
        - Job Post
      summary: Get all jobs in the database if have job_id it will return only one job.
      operationId: controllers.controller.get_all_jobs
      parameters:
        - name: job_id
          in: query
          required: false
          schema:
            type: integer
      responses:
        200:
          description: A list of jobs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Job"

    post:
      tags:
        - Job Post
      summary: Post new job to the database.
      operationId: controllers.controller.post_job
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/JobPost"

      responses:
        201:
          description: A list of filtered jobs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Job"

  /jobs/search:
    post:
      tags:
        - Job Post
      summary: Get filtered jobs from the database
      operationId: controllers.controller.get_filtered_jobs
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/JobFilter"

      responses:
        200:
          description: A list of filtered jobs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Job"

  /bookmarks:
    get:
      tags:
        - Bookmark
      summary: Get all bookmarked jobs in the database
      operationId: controllers.controller.get_bookmark_jobs
      responses:
        200:
          description: A list of bookmarked jobs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Job"
    post:
      tags:
        - Bookmark
      summary: Add new bookmarked job to the database
      operationId: controllers.controller.post_bookmark_jobs
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BookmarkInput"
      responses:
        200:
          description: A new of bookmarked job
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookmarkOutput"

    delete:
      tags:
        - Bookmark
      summary: Delete bookmarked job in the database
      operationId: controllers.controller.delete_bookmark_jobs
      parameters:
        - name: job_id
          in: query
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Bookmark deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookmarkOutput"
  /test/tasks:
    get:
      summary: Get all tasks in the database
      operationId: controllers.controller.get_all_tasks
      responses:
        200:
          description: A list of tasks
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Task"
    post:
      summary: Create a new task
      operationId: controllers.controller.create_task
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TaskInput"
      responses:
        201:
          description: Task created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Task"

  /test/tasks/{task_id}:
    parameters:
      - name: task_id
        in: path
        required: true
        description: The ID of the task
        schema:
          type: string
    get:
      summary: Get a single task by ID
      operationId: controllers.controller.get_task_by_id
      responses:
        200:
          description: A single task
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Task"
        404:
          description: Task not found
    put:
      summary: Update an existing task
      operationId: controllers.controller.update_task
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TaskInput"
      responses:
        200:
          description: Task updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Task"
        404:
          description: Task not found
    delete:
      summary: Delete a task
      operationId: controllers.controller.delete_task
      responses:
        204:
          description: Task deleted successfully
        404:
          description: Task not found

  /settings:
    get:
      summary: Get user setting
      description: Retrieve the user's personal information.
      operationId: controllers.controller.get_user_setting

  /users/me:
    get:
      tags:
        - Profile
      summary: Get the currently authenticated user's porfile
      operationId: controllers.controller.get_self_profile
      responses:
        200:
          description: Return the user profile data created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
        401:
          description: Invalid access_token
        403:
          description: Invalid authorization
        404:
          description: Error fetching profile


  /users/{user_id}/profile:
    get:
      tags:
        - Profile
      summary: Get the user profile data with sub table profile data`
      operationId: controllers.controller.get_user_profile
      parameters:
        - name: user_id
          in: path
          required: true
          description: The ID of the user whose profile to created
          schema:
            type: string

      responses:
        200:
          description: Return the user profile data created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'

  /users/images:
    post:
      tags:
        - Profile
      summary: Upload user profile and banner images
      operationId: controllers.controller.upload_profile_images
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProfileImageInput'
      
      responses:
        200:
          description: Files uploaded successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProfileImageConfirmation'

        401:
          description: Authentication error
  
  /users/profile:
    
    post:
      tags:
        - Profile
      summary: Create an user profile
      operationId: controllers.controller.create_profile

      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserProfileInput"

      responses:
        200:
          description: User profile created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserProfile"

        400:
          description: Error BAD REQUEST

        409:
          description: Profile already exists for user

    patch:
      tags:
        - Profile
      summary: Update existing user profile and settings
      operationId: controllers.controller.update_profile
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserProfileInput"
      responses:
        200:
          description: User profile updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserProfile"

        400:
          description: Error BAD REQUEST

        404:
          description: user profile not found

  /educations:
    get:
      summary: Get all education records
      operationId: controllers.controller.get_educations
      responses:
        200:
          description: A list of educations
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Education"

  /student/histories:
    get:
      summary: Get view histories for the authenticated student
      description: Returns a list of student history entries for the authenticated user.
      operationId: controllers.controller.get_student_histories
      responses:
        200:
          description: A list of student history entries
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/StudentHistory"
    post:
      summary: Create or update a student history entry
      description: Insert a new history row or update the viewed_at timestamp if the (student, job) pair exists.
      operationId: controllers.controller.post_student_history
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StudentHistoryInput"
      responses:
        201:
          description: History entry created or updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StudentHistory"
        400:
          description: Invalid input

  /educations/{education_id}:
    parameters:
      - name: education_id
        in: path
        required: true
        description: The ID of the education record
        schema:
          type: integer
    patch:
      summary: Update an existing education record
      operationId: controllers.controller.patch_education
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EducationPatch"
      responses:
        200:
          description: Education updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Education"
        404:
          description: Education not found
    delete:
      summary: Delete an education record
      operationId: controllers.controller.delete_education
      responses:
        200:
          description: Education deleted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Education"
        404:
          description: Education not found


  /annoucements:
    get:
      summary: Get all of the annoucements from professors
      operationId: controllers.controller.get_professor_annoucement
       
      responses:
        200:
          description: Return all of the annoucements that exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Annoucement'

  /connections:
    get:
        summary: Get the professor connections
        operationId: controllers.controller.get_professor_connection
       
        responses:
          200:
            description: Return the user profile data created successfully
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Connection'
    post:
      summary: Create a new connection
      operationId: controllers.controller.post_new_connection
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConnectionInput'
      
      responses:
        201:
          description: User profile created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Connection'
        
        400:
          description: Error BAD REQUEST
    
    delete:
      summary: Delete the professor connection
      operationId: controllers.controller.delete_connection
      parameters:
        - name: connection_id
          in: query
          required: true
          description: The ID of the connection
          schema:
            type: integer
      
      responses:
        200:
          description: Return the deleted data.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Connection'
        
  /application:
    get:
      tags:
        - Job Application
      summary: Get user job applications
      description: Retrieve the user's submitted job applications using the access token.
      operationId: controllers.controller.fetch_user_job_applications
      responses:
        200:
          description: Applications retrieved successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/StudentApplication"
        400:
          description: Invalid credentials

  /application/{job_id}:
    parameters:
      - name: job_id
        in: path
        required: true
        description: The ID of the related job post.
        schema:
          type: string
    get:
      tags:
        - Job Application
      summary: Get applications by job ID
      description: Retrieve all job applications for a specific job.
      operationId: controllers.controller.fetch_job_applications_from_job
      responses:
        200:
          description: Applications retrieved successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/JobApplication"
        400:
          description: "Invalid job or credentials provided."

    post:
      tags:
        - Job Application
      summary: Create new job application
      description: Create a new job application.
      operationId: controllers.controller.create_job_application
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/ApplicationSubmission"
      responses:
        201:
          description: Application created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobApplication'
        400:
          description: Invalid request body.

  /application/update/{job_id}:
    parameters:
      - name: job_id
        in: path
        required: true
        description: The ID of the job post whose applications to update
        schema:
          type: integer
    patch:
      summary: Update job application statuses
      description: Update the status of multiple job applications for a specific job post. Only the company that owns the job can update application statuses.
      operationId: controllers.controller.update_job_applications_status
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/ApplicationStatusUpdate"
      responses:
        200:
          description: Application statuses updated successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/JobApplication"
        400:
          description: Invalid request body or application IDs provided.
        401:
          description: User is not authenticated
        403:
          description: User is not the job owner.
  /file/{file_id}:
    get:
      tags:
        - File
      summary: View a file in the browser
      description: Retrieve and display a file for viewing in the browser. Requires authentication.
      operationId: controllers.controller.get_file
      parameters:
        - name: file_id
          in: path
          description: The unique identifier of the file to retrieve
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: File retrieved successfully
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            application/msword:
              schema:
                type: string
                format: binary
            application/vnd.openxmlformats-officedocument.wordprocessingml.document:
              schema:
                type: string
                format: binary
            image/jpeg:
              schema:
                type: string
                format: binary
            image/png:
              schema:
                type: string
                format: binary
        400:
          description: Database error occurred
        404:
          description: File not found (either database record or physical file)

  /file/download/{file_id}:
    get:
      tags:
        - File
      summary: Download a file
      description: Download a file as an attachment. Requires authentication.
      operationId: controllers.controller.download_file
      parameters:
        - name: file_id
          in: path
          description: The unique identifier of the file to download
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: File download successful
          headers:
            Content-Disposition:
              description: Indicates the file should be downloaded as an attachment
              schema:
                type: string
                example: attachment; filename="document.pdf"
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            application/msword:
              schema:
                type: string
                format: binary
            application/vnd.openxmlformats-officedocument.wordprocessingml.document:
              schema:
                type: string
                format: binary
            image/jpeg:
              schema:
                type: string
                format: binary
            image/png:
              schema:
                type: string
                format: binary
        400:
          description: Database error occurred
        404:
          description: File not found (either database record or physical file)

  /tags:
    post:
      summary: Create a new tag or return existing tag id
      operationId: controllers.controller.post_tag
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TagInput"
      responses:
        200:
          description: Existing tag returned
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tag"
        201:
          description: New tag created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tag"

  /tags/{tag_id}:
    parameters:
      - name: tag_id
        in: path
        required: true
        schema:
          type: integer
    get:
      summary: Get a tag by id
      operationId: controllers.controller.get_tag_by_id
      responses:
        200:
          description: Tag found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tag"
        404:
          description: Tag not found

  /terms:
    get:
      summary: Get all terms
      operationId: controllers.controller.get_all_terms
      responses:
        200:
          description: A list of terms
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Term"

  /terms/{term_id}:
    parameters:
      - name: term_id
        in: path
        required: true
        schema:
          type: integer
    get:
      summary: Get a term by id
      operationId: controllers.controller.get_term_by_id
      responses:
        200:
          description: Term found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Term"
        404:
          description: Term not found

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    UserRequest:
      type: object
      properties:
        id:
          type: integer
          description: The user request ID
          example: 1
        userId:
          type: string
          format: uuid
          description: The user's unique identifier
          example: "550e8400-e29b-41d4-a716-446655440000"
        requestedType:
          type: string
          enum: ["Student", "Company", "Staff", "Professor", "Admin"]
          description: The type of user being requested
          example: "Student"
        status:
          type: string
          enum: ["pending", "approved", "denied"]
          description: The status of the request
          example: "pending"
        createdAt:
          type: string
          format: date-time
          description: When the request was created
          example: "2025-11-01T10:00:00Z"
        approvedAt:
          type: string
          format: date-time
          nullable: true
          description: When the request was approved
          example: "2025-11-02T14:30:00Z"
        approvedBy:
          type: string
          format: uuid
          nullable: true
          description: The admin who approved the request
          example: "660e8400-e29b-41d4-a716-446655440001"
        firstName:
          type: string
          description: User's first name from profile
          example: "John"
        lastName:
          type: string
          description: User's last name from profile
          example: "Doe"

    UserStatusUpdate:
      type: object
      required:
        - user_id
        - is_accepted
      properties:
        user_id:
          type: string
          description: The user request ID to update
          example: 
            - "550e8400-e29b-41d4-a716-446655440000"
            - "660e8400-e29b-41d4-a716-446655440001"
            - "770e8400-e29b-41d4-a716-446655440002"
        is_accepted:
          type: boolean
          description: Whether to accept the request
          example: true
        delete:
          type: boolean
          description: Whether to delete the user
          default: false
          example: false

    JobRequestWithJob:
      type: object
      properties:
        id:
          type: integer
          description: The job request ID
          example: 1
        jobId:
          type: integer
          description: The job's unique identifier
          example: 
            - "550e8400-e29b-41d4-a716-446655440000"
            - "660e8400-e29b-41d4-a716-446655440001"
            - "770e8400-e29b-41d4-a716-446655440002"
        status:
          type: string
          enum: ["pending", "approved", "denied"]
          description: The status of the request
          example: "pending"
        createdAt:
          type: string
          format: date-time
          description: When the request was created
          example: "2025-11-01T10:00:00Z"
        approvedAt:
          type: string
          format: date-time
          nullable: true
          description: When the request was approved
          example: "2025-11-02T14:30:00Z"
        approvedBy:
          type: string
          format: uuid
          nullable: true
          description: The admin who approved the request
          example: "660e8400-e29b-41d4-a716-446655440001"
        job:
          $ref: '#/components/schemas/Job'

    JobStatusUpdate:
      type: object
      required:
        - job_id
        - is_accepted
      properties:
        job_id:
          type: integer
          description: The job request ID to update
          example: 1
        is_accepted:
          type: boolean
          description: Whether to accept the request
          example: true
        delete:
          type: boolean
          description: Whether to delete the job post
          default: false
          example: false

    AdminUpdateResponse:
      type: object
      properties:
        accepted:
          type: array
          items:
            type: string
          description: List of accepted request IDs
          example: ["550e8400-e29b-41d4-a716-446655440000", "660e8400-e29b-41d4-a716-446655440001"]
        denied:
          type: array
          items:
            type: string
          description: List of denied request IDs
          example: ["550e8400-e29b-41d4-a716-446655440000", "660e8400-e29b-41d4-a716-446655440001"]
        deleted:
          type: array
          items:
            type: string
          description: List of deleted request IDs
          example: ["550e8400-e29b-41d4-a716-446655440000", "660e8400-e29b-41d4-a716-446655440001"]

    ConnectionInput:
        type: object
        required:
          - company_id
        properties:
          company_id:
            type: integer
            description: The unique identifier of the company
   
    Connection:
        type: object
        properties:
          id:
            type: integer
            description: The unique identifier for a connection
            example: 1
          professor_id:
            type: integer
            description: The unique identifier of the professor
          company_id:
            type: integer
            description: The unique identifier of the company
          created_at:
            type: string
            description: Time that this connection got created
    
    Annoucement:
        type: object
        properties:
          id:
            type: integer
            description: The unique identifier for an announcement
            example: 1
          professor:
            type: string
            description: Professor full name (first + last)
            example: "Assoc. Prof. Nattawut Meechai"
          professorPosition:
            type: string
            description: Professor position/title
            example: "Assistant Professor"
          department:
            type: string
            description: Professor department
            example: "Agricultural Engineering"
          company:
            type: string
            description: Company name
            example: "EcoFarm Innovation Ltd."
          companyIndustry:
            type: string
            description: Company industry
            example: "IoT & Smart Farming"
          tags:
            type: array
            items:
              type: string
            description: Tags associated with the company
            example: ["IoT", "Smart Farming", "Workshop"]
    Job:
      type: object
      required:
        - jobId
        - company
        - role
        - jobLevel
        - postTime
      properties:
        jobId:
          type: string
          description: Frontend-facing job identifier (slug)
          example: "urban-frontend-1a2b"
        company:
          type: string
          description: Human-friendly company name
          example: "Urban Mobility Tech"
        role:
          type: string
          description: Job title/role
          example: "Frontend Developer"
        jobLevel:
          type: string
          description: Job seniority level
          example: "Mid-level"
        location:
          type: string
          description: Job or company location
          example: "Bangkok, Thailand"
        postTime:
          type: string
          format: date-time
          description: When the job was posted (ISO timestamp)
          example: "2025-08-01T10:00:00Z"
        description:
          type: string
          description: Detailed description of the job
          example: "Develop and maintain web applications using React and TypeScript."
        jobType:
          type: string
          description: Type of employment
          example: "Full-time"
        skills:
          type: array
          description: Array of required skill names
          items:
            type: string
            example: "React"
        tags:
          type: array
          description: Array of tag names associated with this job
          items:
            type: string
            example: "Remote Work"
        contacts:
          type: array
          description: Contact objects for the job/company
          items:
            type: object
            properties:
              type:
                type: string
                description: Contact type (email, phone, website)
                example: "email"
              link:
                type: string
                description: Contact link or value
                example: "info@urbanmobilitytech.com"
        salaryMin:
          type: number
          format: float
          description: Minimum salary offered
          example: 50000
        salaryMax:
          type: number
          format: float
          description: Maximum salary offered
          example: 70000
        status:
          type: string
          description: Current status of the job posting
          enum: ["pending", "approved", "rejected"]
          example: "approved"
        pendingApplicants:
          type: integer
          description: Number of applicants with pending status
          example: 0
        totalApplicants:
          type: integer
          description: Total number of applicants
          example: 4

    Education:
      type: object
      required:
        - id
        - user_id
        - curriculum_name
        - university
        - major
        - year_of_study
        - graduate_year
      properties:
        id:
          type: integer
          description: The unique identifier for an education record
          example: 1
        user_id:
          type: string
          format: uuid
          description: The unique identifier for the user (foreign key to User table)
          example: "550e8400-e29b-41d4-a716-446655440000"
        curriculum_name:
          type: string
          description: The name of the curriculum or degree program
          example: "Computer Science"
        university:
          type: string
          description: The university name
          example: "Kasetsart University"
        major:
          type: string
          description: The major or field of study
          example: "Computer Science"
        year_of_study:
          type: string
          format: date
          description: The start or year of study
          example: "2020-08-01"
        graduate_year:
          type: string
          format: date
          description: The graduation year or date
          example: "2024-05-15"

    EducationInput:
      type: object
      required:
        - curriculum_name
        - university
        - major
        - year_of_study
        - graduate_year
      properties:
        curriculum_name:
          type: string
          description: The name of the curriculum or degree program
          example: "Computer Science"
        user_id:
          type: string
          format: uuid
          description: The unique identifier for the user (foreign key to User table)
          example: "550e8400-e29b-41d4-a716-446655440000"
        university:
          type: string
          description: The university name
          example: "Kasetsart University"
        major:
          type: string
          description: The major or field of study
          example: "Computer Science"
        year_of_study:
          type: string
          format: date
          description: The start or year of study
          example: "2020-08-01"
        graduate_year:
          type: string
          format: date
          description: The graduation year or date
          example: "2024-05-15"

    EducationPatch:
      type: object
      properties:
        curriculum_name:
          type: string
        user_id:
          type: string
          format: uuid
        university:
          type: string
        major:
          type: string
        year_of_study:
          type: string
          format: date
        graduate_year:
          type: string
          format: date

    JobFilter:
      type: object
      properties:
        title:
          type: string
          maxLength: 50
          description: The job title/position title
        salaryMin:
          type: number
          format: float
          description: Minimum salary offered
        salaryMax:
          type: number
          format: float
          description: Maximum salary offered
        location:
          type: string
          maxLength: 255
          description: Job location
        workHours:
          type: string
          maxLength: 20
          description: Working hours
        jobType:
          type: string
          maxLength: 40
          description: Type of employment
        jobLevel:
          type: string
          maxLength: 40
          description: Type of Job Level.
          example: "internship, entry-level, mid-level, Senior-level"
        skillNames:
          type: array
          items:
            type: string
          description: Array of skill names to filter by
        tagNames:
          type: array
          items:
            type: string
          description: Array of tag names to filter by
        capacity:
          type: integer
          description: Number of positions available
        end_date:
          type: string
          format: date-time
          description: Application deadline
          example: "2025-12-31T23:59:59Z"
        company_id:
          type: string
        companyName:
          type: string
          maxLength: 255
          description: Company Name
        companyType:
          type: string
          maxLength: 50
          description: Company Type
        companyIndustry:
          type: string
          maxLength: 100
          description: Company Industry
        isOwner:
          type: boolean
          description: Job that company post by themself (need JWT)
          default: false

    JobPost:
      type: object
      required:
        - title
        - salaryMin
        - salaryMax
        - location
        - workHours
        - jobType
        - jobLevel
        - capacity
        - endDate
      properties:
        description:
          type: string
          description: Detailed description of the job
          example: "We are looking for an experienced Python developer to join our dynamic team..."
        title:
          type: string
          maxLength: 50
          description: The job title/position title
          example: "Senior Python Developer"
        salaryMin:
          type: number
          format: float
          description: Minimum salary offered
          example: 80000.0
        salaryMax:
          type: number
          format: float
          description: Maximum salary offered
          example: 120000.0
        location:
          type: string
          maxLength: 255
          description: Job location
          example: "Bangkok, Thailand"
        workHours:
          type: string
          maxLength: 20
          description: Working hours
          example: "9:00 AM - 5:00 PM"
        jobType:
          type: string
          maxLength: 40
          description: Type of employment
          example: "full-time"
        jobLevel:
          type: string
          maxLength: 40
          description: Type of Job Level
          example: "Senior-level"
        capacity:
          type: integer
          description: Number of positions available
          example: 2
        endDate:
          type: string
          format: date-time
          description: Application deadline
          example: "2025-12-31T23:59:59Z"
        skillNames:
          type: array
          description: Array of skill names (strings). Missing names will be created.
          items:
            type: string
          example: ["Python", "Django"]
        tagNames:
          type: array
          description: Array of tag names (strings). Missing names will be created.
          items:
            type: string
          example: ["Remote", "Backend"]

    StudentHistory:
      type: object
      required:
        - job_id
        - student_id
        - viewed_at
      properties:
        job_id:
          type: integer
          example: 1
        student_id:
          type: integer
          example: 1
        viewed_at:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the student viewed the job

    StudentHistoryInput:
      type: object
      required:
        - job_id
      properties:
        job_id:
          type: integer
          example: 1
    
    Skill:
      type: object
      properties:
        id:
          type: integer
          description: The unique identifier for a skill
          example: 1
        name:
          type: string
          maxLength: 40
          description: The name of the skill
          example: "JavaScript"
        type:
          type: string
          maxLength: 40
          description: The type/category of the skill
          example: "Programming Language"

    Tag:
      type: object
      properties:
        id:
          type: integer
          description: The unique identifier for a tag
          example: 1
        name:
          type: string
          maxLength: 40
          description: The name of the tag
          example: "Remote Work"

    Company:
      type: object
      properties:
        id:
          type: integer
          description: The unique identifier for a company
          example: 1
        user_id:
          type: integer
          description: The user ID associated with this company
          example: 5
        company_name:
          type: string
          maxLength: 255
          description: Name of the company
          example: "Tech Solutions Ltd."
        company_type:
          type: string
          maxLength: 50
          description: Type of company
          example: "Technology"
        company_industry:
          type: string
          maxLength: 100
          description: Industry sector
          example: "Software Development"
        company_size:
          type: string
          maxLength: 50
          description: Size of the company
          example: "50-100 employees"
        company_website:
          type: string
          maxLength: 255
          description: Company website URL
          example: "https://www.techsolutions.com"
        full_location:
          type: string
          maxLength: 255
          description: Full address of the company
          example: "123 Tech Street, Bangkok, Thailand 10110"

    Task:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
          description: The unique identifier for a task
        name:
          type: string
          description: The name of the task
        completed:
          type: boolean
          description: The completion status of the task
          default: false
    TaskInput:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: The name of the task
        completed:
          type: boolean
          description: The completion status of the task
          default: false
    UserCredentials:
      type: object
      required:
        - access_token
      properties:
        access_token:
          type: string
          description: The access token
        email:
          description: The account email
        type:
          description: The account type
        user_id:
          description: The user id
    error_message:
      type: object
      properties:
        message:
          type: string
    token:
      type: object
      required:
        - access_token
        - refresh_token
      properties:
        access_token:
          type: string
          description: The access token
        refresh_token:
          type: string
          description: The refresh token

    BookmarkInput:
      type: object
      required:
        - jobId
      properties:
        jobId:
          type: integer
          description: The job id (frontend camelCase)

    BookmarkOutput:
      type: object
      properties:
        id:
          type: integer
          description: id of bookmark job
        jobId:
          type: integer
          description: The job id (frontend camelCase)
        studentId:
          type: integer
          description: The student id (frontend camelCase)
        createdAt:
          type: string
          description: date that this bookmark got created

    UserProfileInput:
      type: object
      properties:
        first_name:
          type: string
          description: The first name of the user
          example: "Hu"
        last_name:
          type: string
          description: The last name of the user
          example: "Tao"
        about:
          type: string
          description: A brief description or bio of the user
          example: "Computer Science student interested in web development"
        location:
          type: string
          description: The location or address of the user
          example: "Bangkok, Thailand"
        contact_email:
          type: string
          format: email
          description: The contact email address of the user
          example: "hutao@ku.th"
        gender:
          type: string
          description: The gender of the user
          enum: ["M", "F"]
          example: "M"
        age:
          type: integer
          description: The age of the user
          example: 22
        user_type:
          type: string
          description: The type of user
          enum: ["student", "company", "professor", "admin"]
          example: "student"
        profile_img:
          type: string
          format: uri
          description: URL or path to the user's profile image
        banner_img:
          type: string
          format: uri
          description: URL or path to the user's banner/cover image
        phone_number:
          type: string
          description: The phone number of the user
          example: "0812345678"

    
    ProfileImageInput:
      properties:
        profile_img:
          type: string
          format: binary
          description: The profile image file
        banner_img:
          type: string
          format: binary
          description: The banner image file
    
    ProfileImageConfirmation:
      properties:
        file:
          type: string
          description: The file saved
          example: "profile image"
        status:
          type: string
          description: The file's status
          example: "ok"
      
    UserProfile:
      type: object
      required:
        - user_id
        - first_name
        - last_name
        - user_type
        - is_verified
      properties:
        user_id:
          type: string
          format: uuid
          description: The unique identifier for the user (foreign key to User table)
          example: "550e8400-e29b-41d4-a716-446655440000"
        first_name:
          type: string
          maxLength: 100
          description: The first name of the user
          example: "Sweet"
        last_name:
          type: string
          maxLength: 100
          description: The last name of the user
          example: "Nature"
        about:
          type: string
          nullable: true
          description: A brief description or bio of the user
          example: "Computer Science student interested in web development"
        location:
          type: string
          maxLength: 100
          nullable: true
          description: The location or address of the user
          example: "Bangkok, Thailand"
        contact_email:
          type: string
          format: email
          maxLength: 255
          nullable: true
          description: The contact email address of the user
          example: "sweet_nature@ku.th"
        gender:
          type: string
          maxLength: 1
          nullable: true
          description: The gender of the user (single character)
          enum: ["M", "F"]
          example: "M"
        age:
          type: integer
          nullable: true
          description: The age of the user
          example: 22
        user_type:
          type: string
          maxLength: 20
          description: The type of user
          enum: ["student", "company", "professor", "admin"]
          example: "student"
        profile_img:
          type: string
          maxLength: 100
          nullable: true
          description: Path or filename of the user's profile image
          example: "profile_123456.jpg"
        banner_img:
          type: string
          maxLength: 100
          nullable: true
          description: Path or filename of the user's banner/cover image
          example: "banner_123456.jpg"
        phone_number:
          type: string
          maxLength: 20
          nullable: true
          description: The phone number of the user
          example: "0967983241"
        is_verified:
          type: boolean
          description: Whether the user profile is verified
          default: false
          example: false

    JobApplication:
      type: object
      properties:
        id:
          type: integer
          nullable: false
        applicant:
          type: object
          properties:
            userId:
              type: string
              nullable: false
            firstName:
              type: string
              example: "John"
            lastName:
              type: string
              example: "Doe"
            contactEmail:
              type: string
            location:
              type: string
        jobDetails:
          type: object
          properties:
            jobId:
              type: string
            jobTitle:
              type: string
        resume:
          type: string
        letterOfApplication:
          type: string
        yearsOfExperience:
          type: string
        expectedSalary:
          type: string
        phoneNumber:
          type: string
        status:
          type: string
          enum: ["pending", "accepted", "rejected"]
        appliedAt:
          type: string
          format: date-time
          example: "2025-10-07T18:30:00Z"

    StudentApplication:
      type: object
      properties:
        id:
          type: integer
          example: 1
        applicant:
          type: object
          properties:
            firstName:
              type: string
              example: "Prima"
            lastName:
              type: string
              example: "Chantira"
            contactEmail:
              type: string
              example: "prima@example.com"
            location:
              type: string
              example: "Khon Kaen, Thailand"
            userId:
              type: string
              example: "1"
        appliedAt:
          type: string
          format: date-time
          example: "2025-08-10T09:00:00Z"
        expectedSalary:
          type: string
          example: "45,000 THB/month"
        phoneNumber:
          type: string
          example: "0812345678"
        resume:
          type: string
          example: "/uploads/resumes/prima_resume.pdf"
        letterOfApplication:
          type: string
          example: "/uploads/letters/prima_letter.pdf"
        status:
          type: string
          example: "pending"
          enum: ["pending", "approved", "rejected"]
        yearsOfExperience:
          type: string
          example: "1 year"
        job:
          $ref: "#/components/schemas/Job"

    ApplicationSubmission:
      type: object
      required:
        - firstName
        - lastName
        - email
      properties:
        firstName:
          type: string
          example: John
        lastName:
          type: string
          example: Doe
        email:
          type: string
          format: email
          example: john.doe@example.com
        yearsOfExperience:
          type: string
          example: "2"
        expectedSalary:
          type: string
          example: "15000"
        phoneNumber:
          type: string
          example: "0812345678"
        resume:
          anyOf:
            - type: string
              format: binary
              description: Upload new resume file
            - type: string
              description: Existing resume file ID
        applicationLetter:
          type: string
          format: binary
          description: Upload new application letter file

    TagInput:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          maxLength: 40
          example: "Remote Work"

    Term:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Python"
        type:
          type: string
          example: "Programming Language"
    ApplicationStatusUpdate:
      type: object
      required:
        - applicationId
        - status
      properties:
        applicationId:
          type: integer
          format: uuid
          description: The unique identifier of the job application
          example: 12
        status:
          type: string
          enum: ["accepted", "rejected"]
          description: The new status for the application
          example: "accepted"

    AllCompanyOutput:
      type: object
      properties:
        userId:
          type: string
          description: The user id (owner) of the company
          example: "550e8400-e29b-41d4-a716-446655440000"
        companyId:
          type: string
          description: The id of the company
          example: "123"
        companyName:
          type: string
          description: Name of the company.
          example: "Tech Solutions Ltd."
        jobCount:
          type: integer
          description: Total job postings for the company
          example: 5
        profilePhoto:
          type: string
          description: Profile photo of the company
          example: "profile_123456.jpg"
        bannerPhoto:
          type: string
          description: Banner/cover photo for the company
          example: "banner_123456.jpg"
        industry:
          type: string
          description: Company industry
          example: "Software Development"
        location:
          type: string
          description: Company or profile location
          example: "Bangkok, Thailand"
